<ion-app>

	<ion-split-pane [when]="isSidebarShown" contentId="main">

		<ion-menu side="start" menuId="start" contentId="main">

			<ion-header>
				<ion-toolbar [color]="color">
					<ion-thumbnail *ngIf="sidebar.header.thumbnail" slot="start" (click)="sidebar.header.onClick(sidebar)">
						<img [src]="sidebar.header.thumbnail" />
					</ion-thumbnail>
					<ion-title (click)="sidebar.header.onClick(sidebar)">
						{{ sidebar.header.title }}
					</ion-title>
				</ion-toolbar>
			</ion-header>

			<ion-footer>
				<ion-toolbar [color]="color">
					<ion-buttons *ngIf="sidebar.footer.length > 0" slot="start">
						<ion-button *ngFor="let item of sidebar.footer; trackBy: trackSidebarItem" fill="clear" [title]="item.title" [color]="sidebar.active === item.name ? 'primary' : 'medium'" (click)="item.onClick(item.name, sidebar)">
							<ion-icon [name]="item.icon" slot="icon-only"></ion-icon>
						</ion-button>
					</ion-buttons>
					<ion-buttons slot="end">
						<ion-button fill="clear" [color]="sidebarSignColor" (click)="toggleSidebar()">
							<ion-icon name="trail-sign" slot="icon-only"></ion-icon>
						</ion-button>
					</ion-buttons>
				</ion-toolbar>
			</ion-footer>

			<ion-content [color]="color">

				<ion-list [hidden]="sidebar.active === 'notifications' || sidebar.active === 'preferences'" class="ion-margin-vertical">

					<ion-menu-toggle auto-hide="false" [hidden]="sidebar.active === 'portals'">
						<ion-item *ngFor="let item of sidebar.top; trackBy: trackSidebarItem" [routerLink]="item.link" [queryParams]="item.queryParams" [routerDirection]="item.direction" [detail]="item.detail" [color]="color" (click)="item.onClick(sidebar)">
							<ion-icon *ngIf="item.icon" [name]="item.icon" slot="start"></ion-icon>
							<ion-label>
								<img *ngIf="item.thumbnail" [src]="item.thumbnail" class="ion-float-start" />
								{{ item.title }}
							</ion-label>
						</ion-item>
					</ion-menu-toggle>

					<ion-menu-toggle *ngFor="let menu of sidebar.menu; trackBy: trackSidebarItem" [hidden]="sidebar.active !== menu.name" auto-hide="false">
						<ion-list-header *ngIf="menu.parent && menu.parent.title" [color]="color" (click)="menu.parent.onClick(menu.parent, sidebar)" class="ion-padding-top">
							<ion-label>
								<ion-icon *ngIf="!menu.parent.icon && menu.parent.detail" name="chevron-back" slot="start"></ion-icon>
								<ion-icon *ngIf="menu.parent.icon" [name]="menu.parent.icon" slot="start"></ion-icon>
								<img *ngIf="menu.parent.thumbnail" [src]="menu.parent.thumbnail" class="ion-float-start" />
								{{ menu.parent.title }}
							</ion-label>
						</ion-list-header>
						<ion-item *ngFor="let item of menu.items; trackBy: trackSidebarItem" [routerLink]="item.link" [queryParams]="item.queryParams" [routerDirection]="item.direction" [detail]="item.detail" [color]="color" (click)="item.onClick(item, sidebar)">
							<ion-icon *ngIf="item.icon" [name]="item.icon" slot="start"></ion-icon>
							<ion-label>
								<img *ngIf="item.thumbnail" [src]="item.thumbnail" class="ion-float-start" />
								{{ item.title }}
							</ion-label>
						</ion-item>
					</ion-menu-toggle>

				</ion-list>

				<control-app-preferences *ngIf="sidebar.active === 'preferences'"></control-app-preferences>

			</ion-content>

		</ion-menu>

		<ion-router-outlet id="main"></ion-router-outlet>

	</ion-split-pane>

</ion-app>